{"ast":null,"code":"(function webpackUniversalModuleDefinition(root, factory) {\n  if (typeof exports === 'object' && typeof module === 'object') module.exports = factory();else if (typeof define === 'function' && define.amd) define([], factory);else if (typeof exports === 'object') exports[\"cohere\"] = factory();else root[\"cohere\"] = factory();\n})(global, () => {\n  return (\n    /******/\n    (() => {\n      // webpackBootstrap\n\n      /******/\n      \"use strict\";\n      /******/\n\n      var __webpack_modules__ = {\n        /***/\n        828:\n        /***/\n        function (module, __unused_webpack_exports, __webpack_require__) {\n          var __assign = this && this.__assign || function () {\n            __assign = Object.assign || function (t) {\n              for (var s, i = 1, n = arguments.length; i < n; i++) {\n                s = arguments[i];\n\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n              }\n\n              return t;\n            };\n\n            return __assign.apply(this, arguments);\n          };\n\n          var __importDefault = this && this.__importDefault || function (mod) {\n            return mod && mod.__esModule ? mod : {\n              \"default\": mod\n            };\n          };\n\n          var api_service_1 = __importDefault(__webpack_require__(836));\n\n          var ENDPOINT;\n\n          (function (ENDPOINT) {\n            ENDPOINT[\"GENERATE\"] = \"/generate\";\n            ENDPOINT[\"EMBED\"] = \"/embed\";\n            ENDPOINT[\"CLASSIFY\"] = \"/classify\";\n            ENDPOINT[\"TOKENIZE\"] = \"/tokenize\";\n            ENDPOINT[\"DETOKENIZE\"] = \"/detokenize\";\n            ENDPOINT[\"DETECT_LANGUAGE\"] = \"/detect-language\";\n            ENDPOINT[\"SUMMARIZE\"] = \"/summarize\";\n          })(ENDPOINT || (ENDPOINT = {}));\n\n          var COHERE_EMBED_BATCH_SIZE = 5;\n\n          var Cohere =\n          /** @class */\n          function () {\n            function Cohere() {}\n\n            Cohere.prototype.init = function (key) {\n              api_service_1.default.init(key);\n            };\n\n            Cohere.prototype.makeRequest = function (endpoint, data) {\n              return api_service_1.default.post(endpoint, data);\n            };\n            /** Generates realistic text conditioned on a given input.\n             * See: https://docs.cohere.ai/generate-reference\n             */\n\n\n            Cohere.prototype.generate = function (config) {\n              return this.makeRequest(ENDPOINT.GENERATE, config);\n            };\n            /** Returns a list of tokens for the specified text.\n             * See: https://docs.cohere.ai/tokenize-reference\n             */\n\n\n            Cohere.prototype.tokenize = function (_a) {\n              var text = _a.text;\n              return this.makeRequest(ENDPOINT.TOKENIZE, {\n                text: text\n              });\n            };\n            /** Returns a string for the specified list of tokens.\n             * See: https://docs.cohere.ai/detokenize-reference\n             */\n\n\n            Cohere.prototype.detokenize = function (_a) {\n              var tokens = _a.tokens;\n              return this.makeRequest(ENDPOINT.DETOKENIZE, {\n                tokens: tokens\n              });\n            };\n            /** Returns text embeddings. An embedding is a list of floating point numbers that captures semantic\n             * information about the text that it represents.\n             * See: https://docs.cohere.ai/embed-reference\n             */\n\n\n            Cohere.prototype.embed = function (config) {\n              var _this = this;\n\n              var createBatches = function (array) {\n                var result = [];\n\n                for (var _i = 0, array_1 = array; _i < array_1.length; _i++) {\n                  var value = array_1[_i];\n                  var lastArray = result[result.length - 1];\n\n                  if (!lastArray || lastArray.length === COHERE_EMBED_BATCH_SIZE) {\n                    result.push([value]);\n                  } else {\n                    lastArray.push(value);\n                  }\n                }\n\n                return result;\n              };\n\n              return Promise.all(createBatches(config.texts).map(function (texts) {\n                return _this.makeRequest(ENDPOINT.EMBED, __assign(__assign({}, config), {\n                  texts: texts\n                }));\n              })).then(function (results) {\n                var embeddings = [];\n                results.forEach(function (result) {\n                  embeddings = embeddings.concat(result.body.embeddings);\n                });\n                var meta = results[0].body.meta || undefined;\n                var response = {\n                  statusCode: results[0].statusCode,\n                  body: {\n                    embeddings: embeddings,\n                    meta: meta\n                  }\n                };\n                return response;\n              });\n            };\n            /**\n             * Classifies text as one of the given labels. Returns a confidence score for each label.\n             * See: https://docs.cohere.ai/classify-reference\n             */\n\n\n            Cohere.prototype.classify = function (config) {\n              return this.makeRequest(ENDPOINT.CLASSIFY, config);\n            };\n\n            Cohere.prototype.detectLanguage = function (config) {\n              return this.makeRequest(ENDPOINT.DETECT_LANGUAGE, config);\n            };\n\n            Cohere.prototype.summarize = function (config) {\n              return this.makeRequest(ENDPOINT.SUMMARIZE, config);\n            };\n\n            return Cohere;\n          }();\n\n          var cohere = new Cohere();\n          module.exports = cohere;\n          /***/\n        },\n\n        /***/\n        836:\n        /***/\n        function (module, __unused_webpack_exports, __webpack_require__) {\n          var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n            function adopt(value) {\n              return value instanceof P ? value : new P(function (resolve) {\n                resolve(value);\n              });\n            }\n\n            return new (P || (P = Promise))(function (resolve, reject) {\n              function fulfilled(value) {\n                try {\n                  step(generator.next(value));\n                } catch (e) {\n                  reject(e);\n                }\n              }\n\n              function rejected(value) {\n                try {\n                  step(generator[\"throw\"](value));\n                } catch (e) {\n                  reject(e);\n                }\n              }\n\n              function step(result) {\n                result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n              }\n\n              step((generator = generator.apply(thisArg, _arguments || [])).next());\n            });\n          };\n\n          var __generator = this && this.__generator || function (thisArg, body) {\n            var _ = {\n              label: 0,\n              sent: function () {\n                if (t[0] & 1) throw t[1];\n                return t[1];\n              },\n              trys: [],\n              ops: []\n            },\n                f,\n                y,\n                t,\n                g;\n            return g = {\n              next: verb(0),\n              \"throw\": verb(1),\n              \"return\": verb(2)\n            }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n              return this;\n            }), g;\n\n            function verb(n) {\n              return function (v) {\n                return step([n, v]);\n              };\n            }\n\n            function step(op) {\n              if (f) throw new TypeError(\"Generator is already executing.\");\n\n              while (g && (g = 0, op[0] && (_ = 0)), _) try {\n                if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n                if (y = 0, t) op = [op[0] & 2, t.value];\n\n                switch (op[0]) {\n                  case 0:\n                  case 1:\n                    t = op;\n                    break;\n\n                  case 4:\n                    _.label++;\n                    return {\n                      value: op[1],\n                      done: false\n                    };\n\n                  case 5:\n                    _.label++;\n                    y = op[1];\n                    op = [0];\n                    continue;\n\n                  case 7:\n                    op = _.ops.pop();\n\n                    _.trys.pop();\n\n                    continue;\n\n                  default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                      _ = 0;\n                      continue;\n                    }\n\n                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                      _.label = op[1];\n                      break;\n                    }\n\n                    if (op[0] === 6 && _.label < t[1]) {\n                      _.label = t[1];\n                      t = op;\n                      break;\n                    }\n\n                    if (t && _.label < t[2]) {\n                      _.label = t[2];\n\n                      _.ops.push(op);\n\n                      break;\n                    }\n\n                    if (t[2]) _.ops.pop();\n\n                    _.trys.pop();\n\n                    continue;\n                }\n\n                op = body.call(thisArg, _);\n              } catch (e) {\n                op = [6, e];\n                y = 0;\n              } finally {\n                f = t = 0;\n              }\n\n              if (op[0] & 5) throw op[1];\n              return {\n                value: op[0] ? op[1] : void 0,\n                done: true\n              };\n            }\n          };\n\n          var __importDefault = this && this.__importDefault || function (mod) {\n            return mod && mod.__esModule ? mod : {\n              \"default\": mod\n            };\n          };\n\n          var https = __webpack_require__(687);\n\n          var error_service_1 = __importDefault(__webpack_require__(959));\n\n          var URL;\n\n          (function (URL) {\n            URL[\"COHERE_API\"] = \"api.cohere.ai\";\n          })(URL || (URL = {}));\n\n          var APIImpl =\n          /** @class */\n          function () {\n            function APIImpl() {\n              this.COHERE_API_KEY = \"\";\n              this.COHERE_VERSION = \"1\";\n            }\n\n            APIImpl.prototype.init = function (key) {\n              this.COHERE_API_KEY = key;\n            };\n\n            APIImpl.prototype.post = function (endpoint, data) {\n              return __awaiter(this, void 0, void 0, function () {\n                var _this = this;\n\n                return __generator(this, function (_a) {\n                  return [2\n                  /*return*/\n                  , new Promise(function (resolve, reject) {\n                    try {\n                      // workaround for js projects that pass json strings.\n                      data = JSON.parse(\"\".concat(data));\n                    } catch (e) {}\n\n                    var reqData = JSON.stringify(data);\n                    var req = https.request({\n                      hostname: URL.COHERE_API,\n                      path: \"/v\".concat(_this.COHERE_VERSION).concat(endpoint),\n                      method: \"POST\",\n                      headers: {\n                        \"Content-Type\": \"application/json; charset=utf-8\",\n                        \"Content-Length\": Buffer.byteLength(reqData, \"utf8\"),\n                        Authorization: \"Bearer \".concat(_this.COHERE_API_KEY),\n                        \"Request-Source\": \"node-sdk\"\n                      },\n                      timeout: 5000\n                    }, function (res) {\n                      var data = [];\n                      res.on(\"data\", function (chunk) {\n                        return data.push(chunk);\n                      });\n                      res.on(\"end\", function () {\n                        if (\"x-api-warning\" in res.headers) {\n                          var warnHeader = res.headers[\"x-api-warning\"];\n\n                          if (typeof warnHeader === \"string\") {\n                            console.warn(\"\\x1b[33mWarning: %s\\x1b[0m\", warnHeader);\n                          } else {\n                            for (var warning in warnHeader) {\n                              console.warn(\"\\x1b[33mWarning: %s\\x1b[0m\", warning);\n                            }\n                          }\n                        }\n\n                        resolve({\n                          statusCode: res.statusCode,\n                          body: JSON.parse(Buffer.concat(data).toString())\n                        });\n                      });\n                    });\n                    req.on(\"error\", function (error) {\n                      return reject(error_service_1.default.handleError(error));\n                    });\n                    req.write(reqData, \"utf8\");\n                    req.end();\n                  })];\n                });\n              });\n            };\n\n            return APIImpl;\n          }();\n\n          var API = new APIImpl();\n          module.exports = API;\n          /***/\n        },\n\n        /***/\n        959:\n        /***/\n        module => {\n          var errorImpl =\n          /** @class */\n          function () {\n            function errorImpl() {}\n\n            errorImpl.prototype.handleError = function (error) {\n              var _a, _b, _c;\n\n              var status = ((_a = error.response) === null || _a === void 0 ? void 0 : _a.status) || 500;\n              var message = ((_c = (_b = error.response) === null || _b === void 0 ? void 0 : _b.data) === null || _c === void 0 ? void 0 : _c.message) || error.message;\n              return {\n                statusCode: status,\n                body: {\n                  message: message\n                }\n              };\n            };\n\n            return errorImpl;\n          }();\n\n          var errors = new errorImpl();\n          module.exports = errors;\n          /***/\n        },\n\n        /***/\n        687:\n        /***/\n        module => {\n          module.exports = require(\"https\");\n          /***/\n        }\n        /******/\n\n      };\n      /************************************************************************/\n\n      /******/\n      // The module cache\n\n      /******/\n\n      var __webpack_module_cache__ = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n        // Check if module is in cache\n\n        /******/\n        var cachedModule = __webpack_module_cache__[moduleId];\n        /******/\n\n        if (cachedModule !== undefined) {\n          /******/\n          return cachedModule.exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = __webpack_module_cache__[moduleId] = {\n          /******/\n          // no module.id needed\n\n          /******/\n          // no module.loaded needed\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        __webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /************************************************************************/\n\n      /******/\n\n      /******/\n      // startup\n\n      /******/\n      // Load entry module and return exports\n\n      /******/\n      // This entry module is referenced by other modules so it can't be inlined\n\n      /******/\n\n\n      var __webpack_exports__ = __webpack_require__(828);\n      /******/\n\n      /******/\n\n\n      return __webpack_exports__;\n      /******/\n    })()\n  );\n});","map":null,"metadata":{},"sourceType":"script"}